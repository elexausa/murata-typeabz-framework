# Murata Type ABZ Framework
Firmware framework for projects on the Murata Type ABZ SoC that contains an STM32L microcontroller and SX1276 transceiver.

## How-to
The primary component of this framework is the Makefile. It performs automatic linking and compilation of necessary device drivers and user code. The device drivers, linking code, and other libraries are obtained from STM32CubeMX's project generator.

### Steps
1. Install required toolchains
    - Compatible ARM compiler
        - Ubuntu / Debian
            - `sudo apt-get install libc6-armel-cross libc6-dev-armel-cross binutils-arm-linux-gnueabi libncurses5-dev`
    - [STM32CubeMX](https://www.st.com/en/development-tools/stm32cubemx.html)
2. Download desired release
    - See [Releases](/releases)
3. Extract project to desired location
4. Use STM32CubeMX to open the included `mx_config.ioc` project and adjust configuration
    - Under "Project Manager" > "Project" > "Project Settings"
        - Set your desired project name
        - Set the project location to be *different* than the your actual project root (this is temporary)
        - Set "Application Structure" to "Basic"
        - Set "Toolchain / IDE" to "Makefile"
    - Under "Project Manager" > "Code Generator"
        - Set "STM32Cube Firmware Library Package" to "Copy only the necessary library files"
        - Enable "Keep User Code when re-generating"
        - Enable "Delete previously generated files when not re-generated"
5. You are now ready to generate output files by clicking "Generate Code"
    - **IMPORTANT** In order to maintain compatability with the provided Makefile, the initialization code generated by STM32CubeMX must be transferred to your actual project root
6. After generating initialization files, copy them to your project root with the following file structure:
    - inc 
    - lib
        - CMSIS
            - device
                - STM32L0xx
                    - inc
                    - startup
                        - startup_stm32l083xx.s
            - inc
        - STM32L0xx_HAL_Driver
